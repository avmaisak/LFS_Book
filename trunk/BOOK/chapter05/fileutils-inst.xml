<sect2>
<title>Installation of Fileutils</title>

<para>The programs from a statically linked fileutils package may cause
segmentation faults on certain systems. These systems are often, but not 
limited to, Linux systems that run Glibc-2.2.3 with an AMD CPU (Athlons 
and Durons are the most reported used CPU's). If you are in this category, 
run the following to sed commands before you compile this package.

<screen><userinput>sed 's/\(.*\)\(fopen-safer\.c \)\\/\1\2atexit.c \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;lib/Makefile.in &gt; tmp &amp;&amp;</userinput>
<userinput>sed 's/\(.*\)\(idcache\$U\.\$.*\)\\/\1\2atexit$U.$(OBJEXT) \\/' \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;tmp &gt; lib/Makefile.in</userinput></screen></para>

<para>Install fileutils by running the following commands:
<screen><userinput>./configure --disable-nls \</userinput>
<userinput>&nbsp;&nbsp;&nbsp;--prefix=$LFS/usr --libexecdir=$LFS/bin --bindir=$LFS/bin &amp;&amp;</userinput>
<userinput>make LDFLAGS=-static &amp;&amp;</userinput>
<userinput>make install &amp;&amp;</userinput>
<userinput>cd $LFS/usr/bin &amp;&amp;</userinput>
<userinput>ln -sf ../../bin/install</userinput></screen></para>

<para>Once you have installed fileutils, you can test whether the
segmentation fault problem has been avoided by running
<userinput>$LFS/bin/ls</userinput>. If this works, then you are OK. If
not, then you need to re-do the installation using the sed commands if 
you didn't use them, or without the sed commands if you did use 
them.</para>

</sect2>

