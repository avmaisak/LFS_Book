<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-profile">
<title>The Bash Shell Startup Files</title>
<?dbhtml filename="profile.html"?>

<indexterm zone="ch-scripts-profile"><primary sortas="e-/etc/profile">/etc/profile</primary></indexterm>

<para>The shell program <command>/bin/bash</command> (hereafter
referred to as <quote>the shell</quote>) uses a collection of startup
files to help create an environment to run in. Each file has a
specific use and may effect login and interactive environments
differently. The files in the <filename
class="directory">/etc</filename> directory provide global settings.
If an equivalent file exists in the home directory, it may override
the global settings.</para>

<para>An interactive login shell is started after a successful login,
using <command>/bin/login</command>, by reading the
<filename>/etc/passwd</filename> file. An interactive non-login shell
is started at the command-line (e.g.,
<prompt>[prompt]$</prompt><command>/bin/bash</command>). A
non-interactive shell is usually present when a shell script is
running. It is non-interactive because it is processing a script and
not waiting for user input between commands.</para>

<para>For more information, see <command>info bash</command> - Nodes:
Bash Startup Files and Interactive Shells.</para>

<para>The files <filename>/etc/profile</filename> and
<filename>~/.bash_profile</filename> are read when the shell is
invoked as an interactive login shell.</para>

<para>A base <filename>/etc/profile</filename> below sets some
environment variables necessary for native language support. Setting
them properly results in:</para>

<itemizedlist>
<listitem><para>The output of programs translated into the native
language</para></listitem>
<listitem><para>Correct classification of characters into letters,
digits and other classes. This is necessary for Bash to properly
accept non-ASCII characters in command lines in non-English
locales</para></listitem>
<listitem><para>The correct alphabetical sorting order for the
country</para></listitem>
<listitem><para>Appropriate default paper size</para></listitem>
<listitem><para>Correct formatting of monetary, time, and date
values</para></listitem>
</itemizedlist>

<para>This script also sets the <envar>INPUTRC</envar>
environment variable that makes <application>Bash</application> and
<application>Readline</application> use the
<filename>/etc/inputrc</filename> file created earlier.</para>

<para>Replace <replaceable>[ll]</replaceable> below with the
two-letter code for the desired language (e.g., <quote>en</quote>) and
<replaceable>[CC]</replaceable> with the two-letter code for the
appropriate country (e.g., <quote>GB</quote>).
<replaceable>[charmap]</replaceable> should be replaced with the
canonical charmap for your chosen locale.</para>

<para>The list of all locales supported by Glibc can be obtained by running
the following command:</para>

<screen><userinput>locale -a</userinput></screen>

<para>Locales can have a number of synonyms, e.g. <quote>ISO-8859-1</quote> is
also referred to as <quote>iso8859-1</quote> and <quote>iso88591</quote>.
Some applications cannot handle the various synonyms correctly, so it is safest
to choose the canonical name for a particular locale.  To determine the
canonical name, run the following command, where
<replaceable>[locale name]</replaceable> is the output given by
<command>locale -a</command> for your preferred locale
(<quote>en_GB.iso88591</quote> in our example).</para>

<screen><userinput>LC_ALL=<replaceable>[locale name]</replaceable> locale charmap</userinput></screen>

<para>For the <quote>en_GB.iso88591</quote> locale, the above command
will print:</para>

<screen>ISO-8859-1</screen>

<para>This results in in a final locale setting of <quote>en_GB.ISO-8859-1</quote>.</para>

<para>Once the proper locale settings have been determined, create the
<filename>/etc/profile</filename> file:</para>

<screen><userinput>cat &gt; /etc/profile &lt;&lt; "EOF"
<literal># Begin /etc/profile

export LANG=<replaceable>[ll]</replaceable>_<replaceable>[CC]</replaceable>.<replaceable>[charmap]</replaceable>
export INPUTRC=/etc/inputrc

# End /etc/profile</literal>
EOF</userinput></screen>

<note><para>The <quote>C</quote> (default) and <quote>en_US</quote>
(the recommended one for United States English users) locales are
different.</para></note>

<para>Setting the keyboard layout, screen font, and 
locale-related environment variables are the only internationalization
steps needed to support locales that use ordinary single-byte
encodings and left-to-right writing direction. More complex cases
(including UTF-8 based locales) require additional steps and
additional patches because many applications tend to not work properly
under such conditions.  These steps and patches are not included in
the LFS book and such locales are not supported by LFS in any
way.</para>

</sect1>

