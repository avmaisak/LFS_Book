<sect2>
<title>Installation of Glibc</title>

<para>
Unpack the glibc-crypt and glibc-linuxthreads in the glibc-2.1.3
directory, not in $LFS/usr/src. Don't enter the created directories. Just 
unpack them and leave it with that.
</para>

<para>
A few default parameters of Glibc need to be changed, such as the
directory where the shared libraries are supposed to be installed in and
the directory that contains the system configuration files. For this
purpose you need to create the <filename class="directory">
$LFS/usr/src/glibc-build</filename> directory and cd into that directory
with:
</para>

<blockquote><literallayout>

	<userinput>mkdir $LFS/usr/src/glibc-build &amp;&amp;</userinput>
	<userinput>cd $LFS/usr/src/glibc-build</userinput>

</literallayout></blockquote>

<para>
In that directory you create a new file <filename>configparms</filename> 
by running the following:
</para>

<literallayout>

<userinput>cat &gt; configparms &lt;&lt; "EOF"</userinput>
# Begin configparms

slibdir=/lib
sysconfdir=/etc

# End configparms
<userinput>EOF</userinput>

</literallayout>

<para>
Before we actually install Glibc you need to unpack the Glibc patch
file.
</para>

<para>
Please note that the configure script of Glibc may complain about
certain files in the /usr/include directory being too old and will be
replaced, or that some symlink is not supposed to be there anymore (like
the /usr/include/scsi symlink that's present on older Linux systems). If
it asks you to move a symlink like scsi out of the way, please do so. If
it says it will replace old files by the newer Glibc files you can
ignore that. Glibc does not know that it will end up on $LFS when the
configure script is run.
</para>

<para>
If your system had already a suitable GCC version installed, change to the
<filename class="directory">$LFS/usr/src/glibc-build</filename>
directory and install Glibc by running the following 
commands:
</para>

<blockquote><literallayout>

	<userinput>cd ../glibc-2.1.3 &amp;&amp;</userinput>
	<userinput>patch -Np1 -i ../glibc-2.1.3.patch &amp;&amp;</userinput>
	<userinput>cd $LFS/usr/src/glibc-build &amp;&amp;</userinput>
	<userinput>../glibc-2.1.3/configure \</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--prefix=/usr --enable-add-ons 
		\</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--with-headers=$LFS/usr/include 
		\</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--libexecdir=/usr/bin &amp;&amp;
		</userinput>
	<userinput>make &amp;&amp;</userinput>
	<userinput>make install_root=$LFS install &amp;&amp;</userinput>
	<userinput>make install_root=$LFS localedata/install-locales</userinput>

</literallayout></blockquote>

<para>
If your system didn't have a suitable GCC version installed, change to the
<filename class="directory">$LFS/usr/src/glibc-build</filename>
directory and install Glibc using the gcc-2.95.2.1 you just installed by 
running the following commands:
</para>

<blockquote><literallayout>

	<userinput>cd ../glibc-2.1.3 &amp;&amp;</userinput>
	<userinput>patch -Np1 -i ../glibc-2.1.3.patch &amp;&amp;</userinput>
	<userinput>cd $LFS/usr/src/glibc-build &amp;&amp;</userinput>
	<userinput>CC=/usr/local/gcc2952/bin/gcc \</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;../glibc-2.1.3/configure --prefix=/usr
		--enable-add-ons \</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--with-headers=$LFS/usr/include \
		</userinput>
	<userinput>&nbsp;&nbsp;&nbsp;--libexecdir=/usr/bin &amp;&amp;
		</userinput>
	<userinput>make &amp;&amp;</userinput>
	<userinput>make install_root=$LFS install &amp;&amp;</userinput>
	<userinput>make install_root=$LFS localedata/install-locales</userinput>

</literallayout></blockquote>

</sect2>

